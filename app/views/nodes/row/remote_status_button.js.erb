(function() {
  <% if @response[:history] %>
  <%
  row_ids = Array.new
  @response[:nodes].each do |node|
  row_ids.push("#{node.id}-#{SecureRandom.hex}")
  end
  %>
  rows = [
    <% @response[:nodes].each_with_index do |node, i| %>
    "<%= j render 'nodes/row', row_id: row_ids[i], node: node, row_class: 'nodes__row--ajax' %>",
    <% end %>
  ];
  row_ids = [
    <% row_ids.each do |row_id| %>
    "#node-<%= row_id %>__row",
    <% end %>
  ];
  vipnetInterface.remoteStatus.showHistory({
    parentId: "<%= @response[:row_id] %>",
    place: "<%= @response[:place] %>",
    rows,
  });
  <% end %>
  vipnetInterface.remoteStatus.renderStatus({
    parentId: "<%= @response[:parent_id] %>",
    status: "<%= @response[:status] %>",
    tooltipText: "<%= @response[:tooltip_text] %>",
    fullscreenTooltipKey: "<%= @response[:fullscreen_tooltip_key] %>",
    <% if @response[:history] %>
    undo: "true",
    row_ids,
    <% end %>
  });
})();

(function() {
<% history = @response[:history] && @response[:status] %>
<% if history %>
  rows = [
  <% @response[:nodes].each_with_index do |node, i| %>
    "<%= j render 'nodes/row', history: true, node: node, row_class: 'nodes__row--history' %>",
  <% end %>
  ];
  vipnetInterface.remoteStatus.showHistory({
    parentId: "<%= @response[:row_id] %>",
    place: "<%= @response[:place] %>",
    rows,
    data: {
    <% @response[:nodes].each_with_index do |node, i| %>
      "#node-<%= node.id %>__row": { <%= node.data_js.html_safe %> },
    <% end %>
    }
  });
<% end %>
  vipnetInterface.remoteStatus.renderStatus({
    parentId: "<%= @response[:parent_id] %>",
    status: "<%= @response[:status] %>",
    tooltipText: "<%= @response[:tooltip_text] %>",
    fullscreenTooltipKey: "<%= @response[:fullscreen_tooltip_key] %>",
  <% if history %>
    undo: "true",
    html: "<%= j render 'nodes/row/remote_status/button_undo' %>",
    ids: [
    <% @response[:nodes].each_with_index do |node, i| %>
      "#node-<%= node.id %>__row",
    <% end %>
    ],
  <% end %>
  });
})();

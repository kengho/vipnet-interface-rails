<%
  tooltipText = case @status
  when true
    t("nodes.row.remote_button.history.loaded")
  when false
    t("nodes.row.remote_button.history.not_loaded")
  end
%>

(function() {
  vipnetInterface.nodes.ajax.renderStatus({
    action: "history",
    data: {
      vid: "<%= @ncc_node.vid %>",
      prop: "<%= @prop %>",
      status: "<%= @status %>",
      tooltipText: "<%= tooltipText %>",
    },
  });
  <% if @status %>

  vipnetInterface.nodes.ajax.renderHistory({
    vid: "<%= @ncc_node.vid %>",
    prop: "<%= @prop %>",
    html: "<%= j render "nodes/row/history" %>",
  });
  <% end %>
})();
